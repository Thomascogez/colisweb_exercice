(this.webpackJsonpcolisweb_internship_execise=this.webpackJsonpcolisweb_internship_execise||[]).push([[0],{164:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(9),c=n.n(o),i=(n(78),n(79),n(7)),l=(n(151),n(13)),s=function(e){return fetch("".concat("https://api-adresse.data.gouv.fr/search/","?q=").concat(e,"&limit=1000&type=housenumber&autocomplete=1"),{method:"GET"})},u=function(){var e=localStorage.getItem("LOCATION")||"";try{return JSON.parse(e)}catch(t){return{}}},m=Object(a.createContext)({searchResult:[],getResult:function(){throw new Error("getResult() not implemented")},coordinate:{lat:0,lng:0},setCoordinate:function(){throw new Error("setCoordinate() not implemented")},zoom:6,setZoom:function(){throw new Error("setZoom() not implemented")}}),p=function(e){var t=e.children,n=Object(a.useState)([]),o=Object(l.a)(n,2),c=o[0],i=o[1],p=Object(a.useState)({lat:48.8534,lng:2.3488}),h=Object(l.a)(p,2),f=h[0],d=h[1],g=Object(a.useState)(6),b=Object(l.a)(g,2),E=b[0],w=b[1];return r.a.createElement(m.Provider,{value:{searchResult:c,getResult:function(e){var t;t=e.toLowerCase(),u().hasOwnProperty(t)&&(i(function(e){return u().hasOwnProperty(e)?u()[e]:null}(e.toLowerCase())),console.log("from local storage")),s(e).then((function(e){return e.json()})).then((function(t){i(t.features),function(e,t){var n=u()||{};n[e]={},n[e]=t,localStorage.setItem("LOCATION",JSON.stringify(n))}(e.toLowerCase(),t.features)})).catch((function(e){return console.log(e)}))},coordinate:f,setCoordinate:d,zoom:E,setZoom:w}},t)},h=n(56),f=n.n(h),d=n(72),g=n.n(d);function b(){var e=Object(a.useContext)(m),t=Object(a.useState)(""),n=Object(l.a)(t,2),o=n[0],c=n[1];return r.a.createElement(i.j,{type:"dark",theme:"primary"},r.a.createElement(i.k,{href:"#"},"Colisweb Exercice"),r.a.createElement(i.i,{navbar:!0,className:"ml-auto"},r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.getResult(o)}},r.a.createElement(i.d,{size:"sm",seamless:!0},r.a.createElement(i.e,{type:"prepend"},r.a.createElement(i.f,null,r.a.createElement("img",{src:g.a,width:"15",alt:"search icon"}))),r.a.createElement(i.c,{value:o,onChange:function(e){return c(e.target.value)},className:"border-0",placeholder:"Search..."})))))}var E=n(28),w=Object(E.GoogleApiWrapper)({apiKey:""})((function(e){var t=e.google,n=Object(a.useContext)(m),o=Object(a.useState)(),c=Object(l.a)(o,2),i=c[0],s=c[1],u=Object(a.useState)(""),p=Object(l.a)(u,2),h=p[0],f=p[1],d=Object(a.useState)(!1),g=Object(l.a)(d,2),b=g[0],w=g[1],O=function(e,t,a){f(e.name),s(t),w(!0),n.setCoordinate(e.position)};return r.a.createElement(E.Map,{google:t,zoom:n.zoom,initialCenter:{lat:n.coordinate.lat,lng:n.coordinate.lng},center:{lat:n.coordinate.lat,lng:n.coordinate.lng}},n.searchResult.map((function(e){return r.a.createElement(E.Marker,{key:e.properties.id,name:e.properties.label,onClick:O,position:{lat:e.geometry.coordinates[1],lng:e.geometry.coordinates[0]}})})),r.a.createElement(E.InfoWindow,{marker:i,visible:b,onClose:function(){f(""),s(null),w(!1)}},r.a.createElement("div",null,r.a.createElement("p",null,h))))})),O=n(57),v=n.n(O),C=function(){var e=Object(a.useContext)(m);return r.a.createElement(i.g,{className:v.a.SearchList},e.searchResult.map((function(t){return r.a.createElement(i.h,{onClick:function(){return n=t.geometry.coordinates[1],a=t.geometry.coordinates[0],e.setCoordinate({lat:n,lng:a}),void e.setZoom(15);var n,a},className:v.a.SearchListItem},t.properties.label)})))},S=function(){return r.a.createElement(p,null,r.a.createElement(b,null),r.a.createElement(i.b,{fluid:!0,className:f.a.MainContainer},r.a.createElement(i.l,{className:f.a.MainRow},r.a.createElement(i.a,{sm:"12",lg:"8"},r.a.createElement(w,null)),r.a.createElement(i.a,{sm:"12",lg:"4"},r.a.createElement(C,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},56:function(e,t,n){e.exports={MainContainer:"App_MainContainer__3W97R",MainRow:"App_MainRow__1b1MY"}},57:function(e,t,n){e.exports={SearchList:"SearchList_SearchList__1mSUi",SearchListItem:"SearchList_SearchListItem__lAnYJ"}},72:function(e,t,n){e.exports=n.p+"static/media/search-24px.a88f7755.svg"},73:function(e,t,n){e.exports=n(164)},78:function(e,t,n){}},[[73,1,2]]]);
//# sourceMappingURL=main.ebc6f5a2.chunk.js.map